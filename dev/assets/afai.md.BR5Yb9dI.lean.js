import{_ as i,c as s,a4 as e,o as t}from"./chunks/framework.CsgBfYqC.js";const n="/Sargassum.jl/dev/assets/svcvbum.DZ76UZ03.png",l="/Sargassum.jl/dev/assets/jcnrifi.BPUX5eBQ.png",h="/Sargassum.jl/dev/assets/qyergal.fOqP-OFp.png",d="/Sargassum.jl/dev/assets/ffghdit.D5ZDcCAr.png",m=JSON.parse('{"title":"AFAI","description":"","frontmatter":{},"headers":[],"relativePath":"afai.md","filePath":"afai.md","lastUpdated":null}'),o={name:"afai.md"};function r(p,a,c,k,g,u){return t(),s("div",null,a[0]||(a[0]=[e(`<h1 id="afai" tabindex="-1">AFAI <a class="header-anchor" href="#afai" aria-label="Permalink to &quot;AFAI&quot;">​</a></h1><p>Sargassum.jl contains tools to generate Sargassum distributions directly from raw Alternative Floating Algae Index (AFAI) data. In brief, <a href="https://www.sciencedirect.com/science/article/abs/pii/S0034425709001710" target="_blank" rel="noreferrer">AFAI</a> is a quantity derived from satellite observations of certain reflectance bands and is catalogued in <a href="https://cwcgom.aoml.noaa.gov/erddap/griddap/noaa_aoml_atlantic_oceanwatch_AFAI_7D.html" target="_blank" rel="noreferrer">ERDDAP</a>. This data can be directly downloaded and managed entirely from Sargassum.jl. Furthermore, distributions are precomputed using default parameters for all available months since 2017.</p><h2 id="SargassumDistribution-Objects" tabindex="-1">SargassumDistribution Objects <a class="header-anchor" href="#SargassumDistribution-Objects" aria-label="Permalink to &quot;SargassumDistribution Objects {#SargassumDistribution-Objects}&quot;">​</a></h2><p>A <a href="/Sargassum.jl/dev/afai-api#SargassumDistribution"><code>SargassumDistribution</code></a> is defined for a particular year and month. For that month, four aggregated binned distributions are stored, one for each of the weeks defined by the days 1-7, 8-14, 15-21 and 22-28. The value of each bin is equal to the fraction of that month&#39;s total coverage. A <a href="/Sargassum.jl/dev/afai-api#SargassumDistribution"><code>SargassumDistribution</code></a> contains the following fields. We describe the fields with minimal jargon here, see <a href="/Sargassum.jl/dev/afai-api#SargassumDistribution"><code>SargassumDistribution</code></a> and the references therein for the full documentation.</p><ul><li><p><code>lon</code>: A vector of longitudes (bin edges).</p></li><li><p><code>lat</code>: A vector of latitudes (bin edges).</p></li><li><p><code>time</code>: A <code>DateTime</code> giving the month and year when the distribution was computed.</p></li><li><p><code>coast</code>: A matrix mask defining the location of the coast. The raw AFAI values close to the coast are ignored when calculating the <code>SargassumDistribution</code> since they tend to be inappropriately large.</p></li><li><p><code>clouds</code>: An array mask defining weekly cloud locations, or inavailability of data in general.</p></li><li><p><code>sargassum</code>: An array with dimensions <code>(lon x lat x 4)</code> whose entries give the fractional coverage of Sargassum at each gridpoint and week of the month. Each value is expressed as a percentage of the total coverage in the entire grid in that month, that is, <code>sargassum</code> is a probability distribution on the grid of longitudes, latitudes and weeks. Or, more simply put, we have <code>sum(sargassum) == 1</code>.</p></li></ul><h2 id="Using-Precomputed-Distributions" tabindex="-1">Using Precomputed Distributions <a class="header-anchor" href="#Using-Precomputed-Distributions" aria-label="Permalink to &quot;Using Precomputed Distributions {#Using-Precomputed-Distributions}&quot;">​</a></h2><p>Before doing anything else, ensure that the package is loaded into your Julia session,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Sargassum</span></span></code></pre></div><p>These distributions must be downloaded first, which is accomplished simply using the function <a href="/Sargassum.jl/dev/afai-api#Sargassum.download_precomputed-Tuple{}"><code>download_precomputed</code></a> which downloads each available year&#39;s distribution, roughly 5 MB of data per year.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">download_precomputed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>This only has to be done once, but can be re-run to download any new available data. All precomputed data is stored in the variable <a href="/Sargassum.jl/dev/afai-api#Sargassum.SARGASSUM_DISTRIBUTION_PRECOMPUTED"><code>SARGASSUM_DISTRIBUTION_PRECOMPUTED</code></a>. This is a <code>Dict</code> mapping <code>(year, month)</code> tuples to <a href="/Sargassum.jl/dev/afai-api#SargassumDistribution"><code>SargassumDistribution</code></a> objects. For now, let&#39;s visualize the April 2018 weekly distributions using the <a href="/Sargassum.jl/dev/plotting-api#Sargassum.viz"><code>viz</code></a> function:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dist_april_2018 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SARGASSUM_DISTRIBUTION_PRECOMPUTED[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dist_april_2018, log_scale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><img src="`+n+'" alt=""></p><p>Or, visualize a specific week,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dist_april_2018, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, log_scale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><img src="'+l+'" alt=""></p><p>Show the coast and cloud coverage,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dist_april_2018, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, log_scale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, show_clouds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, show_coast </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><img src="'+h+`" alt=""></p><p>We can examine the distribution numerically. First, we&#39;ll read the fields of <code>dist_april_2018</code> into variables:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dist_april_2018</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lon</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dist_april_2018</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sargassum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dist_april_2018</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sargassum</span></span></code></pre></div><p>Let&#39;s check the monthly coverage in a specific bin:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bin_idx_lon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 70</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # the 70&#39;th lon bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bin_idx_lat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # the 30&#39;th lat bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bin_centers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (lon[bin_idx_lon], lat[bin_idx_lat])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bin_frac </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sargassum[bin_idx_lon, bin_idx_lat, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1 implies first week</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;The bin centered at </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(bin_centers)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> contains, cumulatively over the first week of April </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bin_frac)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">% of the total Sargassum in the whole of April.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>The bin centered at (-66.8803171641791, 17.515038985392813) contains, cumulatively over the first week of April 0.01943739189300686% of the total Sargassum in the whole of April.</span></span></code></pre></div><h2 id="Saving-and-Loading-Distributions" tabindex="-1">Saving and Loading Distributions <a class="header-anchor" href="#Saving-and-Loading-Distributions" aria-label="Permalink to &quot;Saving and Loading Distributions {#Saving-and-Loading-Distributions}&quot;">​</a></h2><p>We can save a distribution to a NetCDF file for use elsewhere by applying <a href="/Sargassum.jl/dev/afai-api#Sargassum.distribution_to_nc"><code>distribution_to_nc</code></a>. Multiple distributions can be saved at once.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dist_april_2018 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SARGASSUM_DISTRIBUTION_PRECOMPUTED[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dist_may_2018 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SARGASSUM_DISTRIBUTION_PRECOMPUTED[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distribution_to_nc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([dist_april_2018, dist_may_2018], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist_april_may_2018.nc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>A saved set of <code>SargassumDistribution</code>s can be loaded later via</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SargassumDistribution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist_april_may_2018.nc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Note that when a <code>SargassumDistribution</code> is loaded in this manner, what is actually returned is a <code>Dict</code> mapping <code>(year, month)</code> tuples to <a href="/Sargassum.jl/dev/afai-api#SargassumDistribution"><code>SargassumDistribution</code></a> objects, in the same manner as <a href="/Sargassum.jl/dev/afai-api#Sargassum.SARGASSUM_DISTRIBUTION_PRECOMPUTED"><code>SARGASSUM_DISTRIBUTION_PRECOMPUTED</code></a>. This applies even if the NetCDF file only contains a single <code>SargassumDistribution</code>.</p><h2 id="Raw-AFAI-Data" tabindex="-1">Raw AFAI Data <a class="header-anchor" href="#Raw-AFAI-Data" aria-label="Permalink to &quot;Raw AFAI Data {#Raw-AFAI-Data}&quot;">​</a></h2><p>Raw AFAI data can be downloaded using the function <a href="/Sargassum.jl/dev/afai-api#Sargassum.download_raw_afai-Tuple{Integer, Integer}"><code>download_raw_afai</code></a>. The signature of <a href="/Sargassum.jl/dev/afai-api#Sargassum.download_raw_afai-Tuple{Integer, Integer}"><code>download_raw_afai</code></a> is</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">download_raw_afai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(year, month_spec; force)</span></span></code></pre></div><p><code>year</code> is the desired year, <code>month_spec</code> can be one of the following</p><ul><li><p>an integer between <code>1</code> and <code>12</code>: download the data from the corresponding month</p></li><li><p>a vector of integers each between <code>1</code> and <code>12</code>: download the data from all of the corresponding months</p></li><li><p>omitted: download the data for every month in the given year</p></li></ul><p>If <code>force = true</code>, the data is downloaded even if it already has been. Let us download the data for April, 2018.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">download_raw_afai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>The paths to the raw data are stored in <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAI_DOWNLOADED_PATHS"><code>AFAI_DOWNLOADED_PATHS</code></a>, which is a <code>Dict</code> mapping <code>(year, month)</code> pairs to the path of the downloaded data. In this case, <code>AFAI_DOWNLOADED_PATHS[(2018, 4)]</code> will return the path to the data we just downloaded. This can be directly loaded into an <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAI"><code>AFAI</code></a> object, which holds the data itself and the <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAIParameters"><code>AFAIParameters</code></a> that define how the distribution is computed. Refer to the full documentation for <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAIParameters"><code>AFAIParameters</code></a> for more information regarding these parameters. For now, we will use the default values and hence <code>AFAIParameters()</code> will be a sufficient constructor. The signature for an <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAI"><code>AFAI</code></a> object is</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AFAI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filename, params)</span></span></code></pre></div><p>where <code>filename</code> is the NetCDF file that holds the raw AFAI data (assumed to have been downloaded using <a href="/Sargassum.jl/dev/afai-api#Sargassum.download_raw_afai-Tuple{Integer, Integer}"><code>download_raw_afai</code></a>) and params is an <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAIParameters"><code>AFAIParameters</code></a>. Therefore, we have</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AFAI_DOWNLOADED_PATHS[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AFAIParameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">afai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AFAI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filename, params)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>AFAI[10138534 pixels, Lon ∈ (-98.0, -38.0), Lat ∈ (0.0, 38.0), April 2018]</span></span></code></pre></div><p>This can also be visualized using <a href="/Sargassum.jl/dev/plotting-api#Sargassum.viz"><code>viz</code></a>,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(afai, thresh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># only look at the data in the 90th percentile.</span></span></code></pre></div><p><img src="`+d+'" alt=""></p><p>Refer to <a href="/Sargassum.jl/dev/afai-api#Sargassum.remove_raw_afai-Tuple{Integer, Integer}"><code>remove_raw_afai</code></a> to remove downloaded data.</p><h2 id="Constructing-Your-Own-SargassumDistributions" tabindex="-1">Constructing Your Own SargassumDistributions <a class="header-anchor" href="#Constructing-Your-Own-SargassumDistributions" aria-label="Permalink to &quot;Constructing Your Own SargassumDistributions {#Constructing-Your-Own-SargassumDistributions}&quot;">​</a></h2><p>The highest level function for constructing a custom <code>SargassumDistributions</code> is <a href="/Sargassum.jl/dev/afai-api#Sargassum.sargassum_distribution"><code>sargassum_distribution</code></a>. The signature of <a href="/Sargassum.jl/dev/afai-api#Sargassum.sargassum_distribution"><code>sargassum_distribution</code></a> is</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sargassum_distribution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(year, month_spec, outfile; params)</span></span></code></pre></div><p>where <code>year</code> and <code>month_spec</code> are defined identically as in the <a href="/Sargassum.jl/dev/afai-api#Sargassum.download_raw_afai-Tuple{Integer, Integer}"><code>download_raw_afai</code></a> function seen previously and <code>outfile</code> is a NetCDF file to which the computed <code>SargassumDistribution</code>(s) are written. The optional argument <code>params</code> is an <a href="/Sargassum.jl/dev/afai-api#Sargassum.AFAIParameters"><code>AFAIParameters</code></a> object that controls the specifications of how the distribution is computed from the raw AFAI data.</p><p>The following command will (1) download the raw AFAI data for April 2018 if it has not already been downloaded (if you ran <code>download_raw_afai</code> earlier, this is automatically recognized and the download is skipped) and (2) compute the <code>SargassumDistribution</code> using default <code>AFAIParameters</code> and finally (3) write the result to <code>&quot;dist_april_2018_downloaded.jl&quot;</code>.</p><div class="tip custom-block"><p class="custom-block-title">Tip</p><p>Computing a <code>SargassumDistribution</code> may take several minutes, but the process is automatically parallelized when multiple threads are available. Start Julia with <code>julia --threads=auto</code> instead of <code>julia</code> in order to take advantage of this. Run <code>Threads.nthreads()</code> in the REPL to see how many threads are available in your instance of Julia; as long as at least 4 are available, the computation will be efficient.</p></div><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sargassum_distribution</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2018</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist_april_2018_downloaded.jl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>This distribution can be examined using <code>SargassumDistribution(&quot;dist_april_2018_downloaded.jl&quot;)</code> and plotted as done previously.</p>',54)]))}const y=i(o,[["render",r]]);export{m as __pageData,y as default};
